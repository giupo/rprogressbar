# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

language: r

cache:
  directories:
    - $TRAVIS_BUILD_DIR/packrat/src
    - $TRAVIS_BUILD_DIR/packrat/lib
  packages: true
  
sudo: false

addons:
  apt:
    packages:
       - libxml2-dev
       - tk8.5

r:
  - release

repos:
  CRAN: http://cran.rstudio.com

r_github_packages:
  - jimhester/covr
  - rstudio/packrat

before_install:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

after_success:
  - Rscript -e 'packrat::restore()'
  - Rscript -e 'devtools::test()'
  - Rscript -e 'covr::codecov(line.exclusions=file.path("packrat", list.files(path="packrat", recursive=T)))'
